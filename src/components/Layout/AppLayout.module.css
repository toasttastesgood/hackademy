.appContainer {
  margin: 0;
  padding: 0;
  display: flex;
  min-height: 100vh;
  position: relative;
  background: var(--bg-primary); /* Use theme variable for background */
  overflow-x: hidden;
  /* Ensure background applies correctly for themes like glass */
  background-attachment: fixed;
}

.mainWrapper {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
  padding: 0;
  position: relative;
  /* Use variable for transition */
  transition: margin-left var(--duration-base) var(--ease-in-out), transform var(--duration-base) var(--ease-in-out);
  width: 100%; /* Let it fill remaining space */
  z-index: var(--z-index-content); /* Use variable */
  margin-left: var(--sidebar-width-collapsed); /* Default margin for collapsed sidebar */
}

.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh; /* Ensure full height */
  z-index: var(--z-index-sidebar); /* Use variable */
  width: var(--sidebar-width-collapsed); /* Default width */
  transition: width var(--duration-base) var(--ease-in-out), transform var(--duration-base) var(--ease-in-out);
  /* Background/styling handled within Sidebar component itself */
}

.sidebarOpen {
  width: var(--sidebar-width); /* Expanded width */
}

/* Adjust main wrapper margin when sidebar is open */
.sidebarOpen ~ .mainWrapper {
   margin-left: var(--sidebar-width);
}


.contentArea {
  /* Use topbar height variable + spacing */
  padding: calc(var(--topbar-height) + var(--space-lg)) var(--space-xl) var(--space-xl) var(--space-xl);
  flex-grow: 1;
  overflow-y: auto;
  /* Margin-left is handled by mainWrapper now */
}

/* Mobile Backdrop */
.sidebarBackdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--bg-backdrop); /* Use variable */
  z-index: var(--z-index-backdrop); /* Use variable */
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--duration-base) var(--ease-in-out);
}

.sidebarBackdropActive {
  opacity: 1;
  pointer-events: all;
}

/* --- Responsive Styles --- */

/* Tablet & Desktop (Sidebar behavior changes here) */
@media (min-width: 769px) {
  /* Ensure mobile transforms are reset */
   .sidebar {
     transform: translateX(0);
   }
   .mainWrapper {
     transform: translateX(0);
   }
}


/* Mobile Styles (max-width: 768px) */
@media (max-width: 768px) {
  .mainWrapper {
    margin-left: 0; /* No margin push on mobile */
    transition: transform var(--duration-base) var(--ease-in-out); /* Only transform */
    transform: translateX(0);
    width: 100vw; /* Ensure it takes full width */
  }

  .sidebar {
    width: var(--sidebar-width); /* Mobile sidebar is full width when open */
    transform: translateX(-100%); /* Start off-screen */
    transition: transform var(--duration-base) var(--ease-in-out);
    /* pointer-events: none; /* Let backdrop handle clicks */
  }

  .sidebarMobileOpen {
    transform: translateX(0); /* Slide in */
    /* pointer-events: auto; */
  }

  /* Remove main content margin adjustment on mobile */
  .sidebarOpen ~ .mainWrapper {
     margin-left: 0;
  }

  /* Content padding adjustment for mobile if needed */
  .contentArea {
     padding: calc(var(--topbar-height) + var(--space-md)) var(--space-md) var(--space-md) var(--space-md);
     margin-left: 0; /* Ensure no margin */
  }

  /* Keep main content shift if sidebar pushes it (optional behavior) */
  /*
  .sidebarMobileOpen ~ .mainWrapper {
     transform: translateX(var(--sidebar-width));
  }
  */

  /* Remove redundant/conflicting rules from previous version */
  /* .category-list, .quiz-categories, .category-grid adjustments likely belong in their respective component CSS */
  /* .dashboard adjustments belong in Dashboard.module.css */
  /* .question.card adjustments belong in QuizPlayer/Review CSS */
  /* .options .btn adjustments belong in Button/QuizPlayer CSS */
}
