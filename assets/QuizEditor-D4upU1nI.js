import{r as h,j as e,B as l}from"./index-D9Y_lQYr.js";function m(){return Math.random().toString(36).substr(2,9)}const w="custom_quizzes";function b(){return{id:m(),category:"",title:"",description:"",questions:[]}}function j(){try{const n=localStorage.getItem(w);return n?JSON.parse(n):[]}catch{return[]}}function S(n){localStorage.setItem(w,JSON.stringify(n))}const I=()=>{const[n,a]=h.useState(b()),[v,g]=h.useState([]),[k,p]=h.useState(null);h.useEffect(()=>{g(j())},[]);const x=t=>{a({...n,[t.target.name]:t.target.value})},y=()=>{const t={type:"mcq",text:"",correctAnswers:[""],wrongAnswers:[""]};a({...n,questions:[...n.questions,t]}),p(n.questions.length)},d=(t,s)=>{const i=n.questions.slice();i[t]=s,a({...n,questions:i})},A=t=>{const s=n.questions.slice();s.splice(t,1),a({...n,questions:s}),p(null)},f=()=>{let t=j();const s=t.findIndex(i=>i.id===n.id);s!==-1?t[s]=n:t.push(n),S(t),g(t),alert("Quiz saved!")},C=()=>{const t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n,null,2)),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download",`${n.title||"quiz"}.json`),document.body.appendChild(s),s.click(),s.remove()},Q=t=>{var o;const s=(o=t.target.files)==null?void 0:o[0];if(!s)return;const i=new FileReader;i.onload=r=>{var c;try{const u=JSON.parse((c=r.target)==null?void 0:c.result);u&&u.title&&u.questions?(a({...u,id:m()}),alert("Quiz imported! You can now edit and save it.")):alert("Invalid quiz file.")}catch{alert("Failed to parse quiz file.")}},i.readAsText(s)},z=(t,s)=>e.jsxs("div",{style:{border:"1px solid #ccc",padding:12,marginBottom:12},children:[e.jsxs("label",{children:["Question Text:",e.jsx("input",{type:"text",value:t.text,onChange:i=>d(s,{...t,text:i.target.value}),style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Correct Answers:"}),t.correctAnswers.map((i,o)=>e.jsxs("div",{children:[e.jsx("input",{type:"text",value:i,onChange:r=>{const c=t.correctAnswers.slice();c[o]=r.target.value,d(s,{...t,correctAnswers:c})}}),e.jsx(l,{onClick:()=>{const r=t.correctAnswers.slice();r.splice(o,1),d(s,{...t,correctAnswers:r})},disabled:t.correctAnswers.length===1,children:"Remove"})]},o)),e.jsx(l,{onClick:()=>d(s,{...t,correctAnswers:[...t.correctAnswers,""]}),children:"Add Correct Answer"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Wrong Answers:"}),t.wrongAnswers.map((i,o)=>e.jsxs("div",{children:[e.jsx("input",{type:"text",value:i,onChange:r=>{const c=t.wrongAnswers.slice();c[o]=r.target.value,d(s,{...t,wrongAnswers:c})}}),e.jsx(l,{onClick:()=>{const r=t.wrongAnswers.slice();r.splice(o,1),d(s,{...t,wrongAnswers:r})},disabled:t.wrongAnswers.length===1,children:"Remove"})]},o)),e.jsx(l,{onClick:()=>d(s,{...t,wrongAnswers:[...t.wrongAnswers,""]}),children:"Add Wrong Answer"})]}),e.jsx(l,{onClick:()=>A(s),style:{marginTop:8,background:"#e57373"},children:"Delete Question"})]});return e.jsxs("div",{style:{maxWidth:700,margin:"0 auto",padding:24},children:[e.jsx("h2",{children:"Quiz Editor"}),e.jsx("div",{children:e.jsxs("label",{children:["Title:",e.jsx("input",{type:"text",name:"title",value:n.title,onChange:x,style:{width:"100%"}})]})}),e.jsx("div",{children:e.jsxs("label",{children:["Category:",e.jsx("input",{type:"text",name:"category",value:n.category,onChange:x,style:{width:"100%"}})]})}),e.jsx("div",{children:e.jsxs("label",{children:["Description:",e.jsx("textarea",{name:"description",value:n.description,onChange:x,style:{width:"100%"}})]})}),e.jsx("div",{style:{margin:"16px 0"},children:e.jsx(l,{onClick:y,children:"Add MCQ Question"})}),e.jsx("div",{children:n.questions.map((t,s)=>t.type==="mcq"?z(t,s):null)}),e.jsxs("div",{style:{margin:"16px 0"},children:[e.jsx(l,{onClick:f,children:"Save Quiz"}),e.jsx(l,{onClick:C,style:{marginLeft:8},children:"Export as JSON"}),e.jsxs("label",{style:{marginLeft:8,display:"inline-block"},children:[e.jsx("input",{type:"file",accept:".json,application/json",style:{display:"none"},onChange:Q}),e.jsx(l,{type:"button",children:"Import from JSON"})]})]}),e.jsx("h3",{children:"Preview"}),e.jsxs("div",{style:{background:"#f9f9f9",padding:16,borderRadius:8},children:[e.jsx("strong",{children:n.title}),e.jsx("div",{children:n.description}),e.jsxs("div",{children:[e.jsx("strong",{children:"Questions:"}),e.jsx("ol",{children:n.questions.map((t,s)=>e.jsx("li",{children:t.text},s))})]})]}),e.jsx("h3",{children:"Saved Quizzes"}),e.jsx("ul",{children:v.map(t=>e.jsxs("li",{children:[t.title," (",t.category,")",e.jsx(l,{onClick:()=>a({...t}),style:{marginLeft:8},children:"Edit"})]},t.id))})]})};export{I as default};
